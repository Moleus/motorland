# MotorLand - Техническое Задание

[Презентация проекта](https://docs.google.com/presentation/d/1U1SokMaJ7ZGI7tzTrxHT9dVLIlqR6xsPGW9q8ccO2iA/edit#slide=id.p)

## Общие сведения

1. Цель проекта
- Управление поворотом тестового экземпляра камеры посредством предоставленного API
- Интеграция в систему OpenIPC и поддержка нескольких образцов камер с разной "начинкой"
- Создание унифицированного API для различных моделей камер

2. Команда исполнителей
- Баранов Вячеслав - [algoritmist](https://github.com/algoritmist)
- Миху Вадим - [filberol](https://github.com/filberol)
- Соловьёв Павел - [Moleus](https://github.com/Moleus)
- Хайкин Олег - [Draen](https://github.com/ThatDraenGuy)

## Технические требования

1. Требования к функциональным характеристикам
    - Разработанная система должна осуществлять поворот камеры
    - Система должна включать в себя возможность авто-калибровки моторов
    - Система должна включать в себя возможность фокусировки объектива камеры
    - Система должна предоставлять список поддерживаемых функций на данном устройстве после инициализации
    - Система должна учитывать конструктивные особенности плат
    - Система должна учитывать наличие/отсутствие обратной связи при использовании функций, таких как автокалибровка
    - Система должна поддерживать пользовательскую конфигурацию пинов моторов, используемой библиотеки и других параметров
2. Требования к надежности
    - В системе должна быть реализована валидация пользовательского ввода или параметров, получаемых от других модулей
    - В системе должны учитываться максимальные ограничения по повороту моторов
    - В случае системного сбоя модуль должен прекращать работу и выводить сообщения об ошибке в журнал событий
3. Условия эксплуатации
    - Соответствие требованиям Лицензии MIT
    - Эксплуатация ПО должна осуществляться на видео-камерах, оснащенных шаговыми двигателями
    - Система должна занимать минимальное количество постоянной и оперативной памяти
4. Требования к составу и параметрам технических средств
    - Одна или несколько видеокамер с различными шаговыми моторами и драйверами
    - Средства для прошивки видеокамер
5. Требования к информационной и программной совместимости
    - Используется язык программирования С
    - Разрабатывается в рамках open-source проекта OpenIPC как отдельный модуль, включаемый в систему OpenIPC
    - Система должна быть расширяема и предоставлять функционал для управления шаговыми моторами видеокамер
6. Требования к транспортированию и хранению
    - Исходный код хранится на github
    - Исходный код должен распространяться в соответствии с лицензией

## Требования к документации

Документация должна добавляться в рамках написания кодовой базы. Отдельного документа не требуется.

## Технико-экономические показатели

ПО разрабатывается как open-source проект. Стоимостью обладает лишь сама камера, предоставляемая сторонним вендором.

Главными преимуществами перед встроенным в камеру драйвером являются открытый код и соответствие единой спецификации. 

## Cтадии и этапы разработки

1. Проработка ТЗ
2. Разработка архитектуры системы
    - Составление api драйвера
    - Составление api разделяемой библиотеки
    - Разделение ответственности между модулями
3. Прототипирование системы
    - Минимальный экземпляр модуля ядра (драйвера)
    - Минимальная библиотека для инициализации и управления драйвером
    - Встраивание в систему сборки
    - Разработка MVP
4. Реализация системы
    - Разработка полноценного модуля ядра (драйвера)
    - Разработка библиотеки для инициализации и управления драйвером
    - Рефакторинг
    - Добавление алгоритмов (AF, калибровка)
    - Оптимизация

**Сроки разработки ПО**
ПО должно разрабатываться с марта по май.


## Порядок контроля и приемки

Провести испытания в виде использования драйвера на реальной камере. Конкретными испытаниями могут быть:
- Загрузить внешний модуль ядра, указав необходимые параметры
- Запустить демонстрационный скрипт, подгружающий библиотеку и инициализирующий моторы
- Осуществить поворот на 90 градусов в горизонтальной и вертикальной плоскостях
- Продемонстрировать работу системы на одном экземпляре камеры vstarcam c7824wip

## Ссылки на источники

1. [ГОСТ 19.201-78 Техническое задание. Требования к содержанию и оформлению](https://www.swrit.ru/doc/espd/19.201-78.pdf)
2. [Проект OpenIPC на GitHub](https://github.com/openipc/)
3. [Официальный сайт проекта OpenIPC](https://openipc.org/)
4. [Документация по сборке модулей ядра Линукс](https://docs.kernel.org/kbuild/modules.html)
5. [Документация по работе с gpio из драйвера в Линукс](https://docs.kernel.org/driver-api/gpio/driver.html)
6. [Документация по использованию платформенных драйверов в Линукс](https://docs.kernel.org/driver-api/driver-model/platform.html)
